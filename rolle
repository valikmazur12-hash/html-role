urls

# main/urls.py
from django.urls import path
from . import views 

urlpatterns = [
    # üöÄ –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø 1: –î–æ–¥–∞—î–º–æ –ø–æ—Ä–æ–∂–Ω—ñ–π —à–ª—è—Ö, —è–∫–∏–π –≤–µ–¥–µ –Ω–∞ role_assignment_view
    path('', views.role_assignment_view, name='home'), 
    
    # –ó–∞–ª–∏—à–∞—î–º–æ assignment/ –¥–ª—è –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ—ó –ª–æ–≥—ñ–∫–∏ —Ç–∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó
    path('assignment/', views.role_assignment_view, name='role_assignment'),
    
    # ... —ñ–Ω—à—ñ –º–∞—Ä—à—Ä—É—Ç–∏ ...
    path('reports/', views.page_two_view, name='page_two'),
    path('profil/', views.page_three_view, name='page_three'),
    path('settings/', views.page_four_view, name='page_four'),
]

view

# main/views.py
import json
from django.shortcuts import render, redirect
from django.db import IntegrityError
from .models import UserList, DictPos, RoleD, Dictapplic, GroupD 
from .models import UserRole 

# ====================================================================
# –§–£–ù–ö–¶–Ü–Ø 1: –ì–û–õ–û–í–ù–ê –°–¢–û–†–Ü–ù–ö–ê (data_view.html) - –ê–≤—Ç–æ–∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è
# ====================================================================

def role_assignment_view(request):
    """ –û—Ç—Ä–∏–º—É—î –¥–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —Ç–∞ –ø–æ—Å–∞–¥, —Ñ–æ—Ä–º—É—î JSON –¥–ª—è JavaScript. """
    
    user_data = UserList.objects.select_related('id_pos').all()
    
    user_list_json = [
        {
            'id_user': user.id_user, 
            'Prizvische': user.prizvische,
            'Name': user.name,
            'Father_Name': user.father_name,
            'Position': user.id_pos.name_pos if user.id_pos else '–ù–µ –≤–∏–∑–Ω–∞—á–µ–Ω–æ',
        }
        for user in user_data
    ]
    
    json_data = json.dumps(user_list_json, ensure_ascii=False)

    context = {
        'user_data_json': json_data
    }
    
    return render(request, 'main/data_view.html', context)

# ====================================================================
# –§–£–ù–ö–¶–Ü–Ü 2, 3: –°–¢–û–†–Ü–ù–ö–ê –ó–í–Ü–¢–Ü–í (tabl_d.html) / –°–•–ï–ú–ê (schem.html)
# ====================================================================

def page_two_view(request):
    """
    –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ '–¢–∞–±–ª–∏—Ü—ñ' –∑ —É—Å—ñ–º–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏ —Ç–∞ —ó—Ö–Ω—ñ–º–∏ —Ä–æ–ª—è–º–∏,
    –æ–±'—î–¥–Ω–∞–Ω–∏–º–∏ —ñ–∑ –¥–æ–¥–∞—Ç–∫–∞–º–∏.
    """
    try:
        # 1. –°–∫–ª–∞–¥–Ω–∏–π –∑–∞–ø–∏—Ç: UserList -> UserRole -> RoleD -> GroupD -> Dictapplic
        all_users = UserList.objects.select_related('id_pos').prefetch_related(
            'userrole_set__id_role__id_group__id_app' 
        ).all()
        
        report_data = []
        for user in all_users:
            
            pib = f"{user.prizvische} {user.name} {user.father_name}"
            position_name = user.id_pos.name_pos if user.id_pos else '–ù–µ –≤–∏–∑–Ω–∞—á–µ–Ω–æ'
            
            roles_for_display = []
            
            # 2. –ü–µ—Ä–µ–±—ñ—Ä –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∏—Ö —Ä–æ–ª–µ–π
            for user_role_entry in user.userrole_set.all():
                role = user_role_entry.id_role 
                group = role.id_group 
                application = group.id_app 
                
                roles_for_display.append({
                    'application': application.app_name, 
                    'role_name': role.name 
                })
            
            # 3. –§–æ—Ä–º—É–≤–∞–Ω–Ω—è –∫—ñ–Ω—Ü–µ–≤–∏—Ö –¥–∞–Ω–∏—Ö
            report_data.append({
                'id_user': user.id_user,
                'pib': pib,
                'position': position_name,
                'roles_data': roles_for_display 
            })
            
    except Exception as e:
        # –Ø–∫—â–æ —î —ñ–Ω—à—ñ –ø–æ–º–∏–ª–∫–∏ ORM, –≤–æ–Ω–∏ –±—É–¥—É—Ç—å –≤–∏–≤–µ–¥–µ–Ω—ñ –≤ –∫–æ–Ω—Å–æ–ª—å.
        print(f"–ö–†–ò–¢–ò–ß–ù–ê –ü–û–ú–ò–õ–ö–ê: {e}")
        # –ó–∞–ø–∞—Å–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç: –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ —Ö–æ—á–∞ –± –æ—Å–Ω–æ–≤–Ω—ñ –¥–∞–Ω—ñ
        simple_users = UserList.objects.select_related('id_pos').all()
        report_data = []
        for user in simple_users:
            report_data.append({
                'id_user': user.id_user,
                'pib': f"{user.prizvische} {user.name} {user.father_name}",
                'position': user.id_pos.name_pos if user.id_pos else '–ù–µ –≤–∏–∑–Ω–∞—á–µ–Ω–æ',
                'roles_data': [{'application': '–ó–í‚Äô–Ø–ó–û–ö', 'role_name': '–ê–î–ê–ü–¢–£–ô–¢–ï ORM'}] 
            })
        
    context = {
        'report_data': report_data,
    }
    return render(request, 'main/tabl_d.html', context)


def page_three_view(request):
    """–†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ '–°—Ö–µ–º–∞' (schem.html)."""
    return render(request, 'main/schem.html', {})

# ====================================================================
# –§–£–ù–ö–¶–Ü–Ø 4: –°–¢–í–û–†–ï–ù–ù–Ø –ù–û–í–û–ì–û –ö–û–†–ò–°–¢–£–í–ê–ß–ê (you_user.html)
# ====================================================================

def page_four_view(request):
    """ –û–±—Ä–æ–±–ª—è—î —Ñ–æ—Ä–º—É —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —Ç–∞ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å you_user.html. """
    
    all_users_info = UserList.objects.all().values('id_user', 'prizvische', 'name')
    users_for_select = list(all_users_info) 
    
    # ... (–í–∞—à–∞ –ª–æ–≥—ñ–∫–∞ –æ–±—Ä–æ–±–∫–∏ POST-–∑–∞–ø–∏—Ç—É, —è–∫—â–æ –≤–æ–Ω–∞ —î) ...
    
    if request.method == 'POST':
        # –Ø–∫—â–æ —Ç—É—Ç –±—É–ª–∞ –ª–æ–≥—ñ–∫–∞ –æ–±—Ä–æ–±–∫–∏ —Ñ–æ—Ä–º–∏, –≤–æ–Ω–∞ –º–∞—î –±—É—Ç–∏ –≤—Å—Ç–∞–≤–ª–µ–Ω–∞ —Ç—É—Ç
        message = "–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –Ω–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ!" # –ó–∞–≥–ª—É—à–∫–∞
        context = {'message': message, 'all_users': users_for_select}
        return render(request, 'main/you_user.html', context)

    # –û–±—Ä–æ–±–∫–∞ GET-–∑–∞–ø–∏—Ç—É (–ø—Ä–æ—Å—Ç–µ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏)
    context = {
        'all_users': users_for_select,
    }
    return render(request, 'main/you_user.html', context)

models

# This is an auto-generated Django model module.
# You'll have to do the following manually to clean this up:
#   * Rearrange models' order
#   * Make sure each model has one field with primary_key=True
#   * Make sure each ForeignKey and OneToOneField has `on_delete` set to the desired behavior
#   * Remove `managed = False` lines if you wish to allow Django to create, modify, and delete the table
# Feel free to rename the models, but don't rename db_table values or field names.
from django.db import models


class DictPos(models.Model):
    id_pos = models.AutoField(primary_key=True)
    name_pos = models.TextField(db_column='Name_pos', db_collation='C')  # Field name made lowercase. This field type is a guess.

    class Meta:
        managed = False
        db_table = 'Dict_pos'


class DictServ(models.Model):
    id_serv = models.AutoField(primary_key=True)
    domen = models.TextField(blank=True, null=True)
    discription = models.TextField(blank=True, null=True)
    date_start = models.DateField()
    date_end = models.DateField(blank=True, null=True)

    class Meta:
        managed = False
        db_table = 'Dict_serv'


class Dictapplic(models.Model):
    id_applic = models.AutoField(primary_key=True)
    app_name = models.TextField()
    app_type = models.TextField()
    app_disc = models.TextField(blank=True, null=True)
    data_begin = models.DateField()
    date_end = models.DateField(blank=True, null=True)
    id_server = models.ForeignKey(DictServ, models.DO_NOTHING, db_column='id_server')

    class Meta:
        managed = False
        db_table = 'Dictapplic'


class GroupD(models.Model):
    id_group = models.AutoField(primary_key=True)
    name = models.TextField(db_column='Name', db_collation='C')  # Field name made lowercase. This field type is a guess.
    id_app = models.ForeignKey(Dictapplic, models.DO_NOTHING, db_column='id_app')
    opption = models.IntegerField()

    class Meta:
        managed = False
        db_table = 'Group_d'


class RoleD(models.Model):
    id_role = models.AutoField(primary_key=True)
    name = models.TextField(db_column='Name')  # Field name made lowercase.
    discription = models.TextField(blank=True, null=True)
    id_group = models.ForeignKey(GroupD, models.DO_NOTHING, db_column='id_group')
    date_begin = models.DateField()
    date_end = models.DateField(blank=True, null=True)

    class Meta:
        managed = False
        db_table = 'Role_d'


class UserList(models.Model):
    id_user = models.AutoField(primary_key=True)
    id_pos = models.ForeignKey(DictPos, models.DO_NOTHING, db_column='id_pos')
    prizvische = models.TextField(db_column='Prizvische', db_collation='C')  # Field name made lowercase. This field type is a guess.
    name = models.TextField(db_column='Name', db_collation='C')  # Field name made lowercase. This field type is a guess.
    father_name = models.TextField(db_column='Father_Name', db_collation='C')  # Field name made lowercase. This field type is a guess.
    date_begin = models.DateField()
    date_end = models.DateField(blank=True, null=True)

    class Meta:
        managed = False
        db_table = 'User_list'


class UserRole(models.Model):
    id = models.CharField(max_length=1, primary_key=True, default='1')
    
    id_role = models.ForeignKey('RoleD', models.DO_NOTHING, db_column='id_role')
    id_user = models.ForeignKey('UserList', models.DO_NOTHING, db_column='id_user')

    class Meta:
        managed = False
        db_table = 'User_role'
        unique_together = (('id_role', 'id_user'),)



1page

{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –†–æ–ª–µ–π</title>
    <meta charset="UTF-8"> 
    <link rel="stylesheet" href="{% static 'main/data_view.css' %}?v=1.1">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-content">
                <h1>–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –†–æ–ª–µ–π –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º</h1>
                <nav class="main-nav">
                    <ul>
                        <li><a href="{% url 'role_assignment' %}">–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è</a></li>
                        <li><a href="{% url 'page_two' %}">–¢–∞–±–ª–∏—Ü—ñ</a></li>
                        <li><a href="{% url 'page_three' %}">–°—Ö–µ–º–∞</a></li>
                        <li><a href="{% url 'page_four' %}" class="active">–ü—Ä–æ—Ñ—ñ–ª—å</a></li> 
                    </ul>
                </nav>
            </div>
        </header>

2page

{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>–¢–∞–±–ª–∏—Ü—ñ</title>
    <meta charset="UTF-8"> 
    <link rel="stylesheet" href="{% static 'main/data_view.css' %}?v=1.1">
</head>
<body>
    <div class="container">
        
        <header class="header">
            <div class="header-content">
                <h1>–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –†–æ–ª–µ–π –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º</h1>
                <nav class="main-nav">
                    <ul>
                        <li><a href="{% url 'role_assignment' %}">–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è</a></li>
                        <li><a href="{% url 'page_two' %}">–¢–∞–±–ª–∏—Ü—ñ</a></li>
                        <li><a href="{% url 'page_three' %}">–°—Ö–µ–º–∞</a></li>
                        <li><a href="{% url 'page_four' %}" class="active">–ü—Ä–æ—Ñ—ñ–ª—å</a></li> 
                    </ul>
                </nav>
            </div>
        </header>

        <div class="main-form">
            <h2>üìú –¢–∞–±–ª–∏—Ü—è –∑–∞–ø–∏—Å—ñ–≤ (User_list)</h2>

            <div class="filters-container">
                
                <div class="filter-group filter-checkboxes">
                    <label>–§—ñ–ª—å—Ç—Ä –ø–æ –î–æ–¥–∞—Ç–∫—É (–ß–µ–∫–±–æ–∫—Å–∏):</label>
                    <div id="app-filter-checkboxes">
                        <div class="checkbox-item"><input type="checkbox" name="app_filter" value="ERP"><label>ERP_Finance</label></div>
                        <div class="checkbox-item"><input type="checkbox" name="app_filter" value="CRM"><label>CRM_Sales</label></div>
                        <div class="checkbox-item"><input type="checkbox" name="app_filter" value="HR"><label>HR_Portal</label></div>
                        </div>
                </div>
                
                <div class="filter-group filter-text">
                    <label for="role-filter">–§—ñ–ª—å—Ç—Ä –ø–æ –†–æ–ª—ñ:</label>
                    <input type="text" id="role-filter" placeholder="–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É —Ä–æ–ª—ñ">
                </div>

                <button class="filter-button" onclick="applyFilters()">–ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏</button>
            </div>
            
            <div class="data-table-container">
                <table class="roles-table">
                    <thead>
                        <tr>
                            <th style="width: 5%;">ID</th>
                            <th style="width: 20%;">–ü–Ü–ë –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</th>
                            <th style="width: 15%;">–ü–æ—Å–∞–¥–∞</th>
                            <th style="width: 30%;">–î–æ–¥–∞—Ç–æ–∫</th>
                            <th style="width: 30%;">–†–æ–ª—ñ</th>
                        </tr>
                    </thead>
                    <tbody id="full-report-tbody">
                        
                        {% for user_data in report_data %}
                        <tr>
                            <td>{{ user_data.id_user }}</td>
                            <td>{{ user_data.pib }}</td>
                            <td>{{ user_data.position }}</td>
                            <td>
                                {% for role in user_data.roles_data %}
                                    {{ role.application }}{% if not forloop.last %}<br>{% endif %}
                                {% endfor %}
                            </td>
                            <td>
                                {% for role in user_data.roles_data %}
                                    {{ role.role_name }}{% if not forloop.last %}<br>{% endif %}
                                {% endfor %}
                            </td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="5" style="text-align: center;">–î–∞–Ω—ñ –ø—Ä–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.</td>
                        </tr>
                        {% endfor %}
                        
                    </tbody>
                </table>
            </div>

        </div>
    </div>

    <script>
        function applyFilters() {
            // 1. –ó–±—ñ—Ä –¥–∞–Ω–∏—Ö –∑ —á–µ–∫–±–æ–∫—Å—ñ–≤
            const selectedApps = Array.from(document.querySelectorAll('#app-filter-checkboxes input:checked'))
                                     .map(checkbox => checkbox.value);
            
            // 2. –ó–±—ñ—Ä –¥–∞–Ω–∏—Ö –∑ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Ñ—ñ–ª—å—Ç—Ä–∞
            const roleFilterText = document.getElementById('role-filter').value.trim();

            // 3. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞: —á–∏ –≤–∏–±—Ä–∞–Ω–æ —â–æ—Å—å
            if (selectedApps.length === 0 && roleFilterText === '') {
                alert('–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–∏–±–µ—Ä—ñ—Ç—å —Ö–æ—á–∞ –± –æ–¥–∏–Ω –¥–æ–¥–∞—Ç–æ–∫ –∞–±–æ –≤–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É —Ä–æ–ª—ñ –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó.');
                return;
            }
            
            // 4. –¢–∏–º—á–∞—Å–æ–≤–∏–π –≤–∏–≤—ñ–¥:
            console.log("–§—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏ –∑–∞ –î–æ–¥–∞—Ç–∫–∞–º–∏:", selectedApps);
            console.log("–§—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏ –∑–∞ –†–æ–ª–ª—é:", roleFilterText);

            // 5. ‚ö†Ô∏è –£ —Ä–µ–∞–ª—å–Ω–æ–º—É Django-–ø—Ä–æ—î–∫—Ç—ñ —Ç—É—Ç –º–∞—î –±—É—Ç–∏ AJAX-–∑–∞–ø–∏—Ç:
            // fetch('/reports/?apps=' + selectedApps.join(',') + '&role=' + roleFilterText)
            //     .then(response => response.json())
            //     .then(data => updateTable(data));
            
            alert(`–ó–∞—Å—Ç–æ—Å–æ–≤–∞–Ω–æ —Ñ—ñ–ª—å—Ç—Ä–∏: –î–æ–¥–∞—Ç–∫–∏ (${selectedApps.join(', ')}) —Ç–∞ –†–æ–ª—å (${roleFilterText}).\n–¶—è –ª–æ–≥—ñ–∫–∞ –≤–∏–º–∞–≥–∞—î —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ (Views.py)`);
        }
    </script>
</body>
</html>

3page

{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>–ó–∞–ø–∏—Ç –†–æ–ª—ñ</title>
    <meta charset="UTF-8"> 
    <link rel="stylesheet" href="{% static 'main/data_view.css' %}?v=1.1">
</head>
<body>
    <div class="container">
        
        <header class="header">
            <div class="header-content">
                <h1>–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –†–æ–ª–µ–π –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º</h1>
                <nav class="main-nav">
                    <ul>
                        <li><a href="{% url 'role_assignment' %}">–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è</a></li>
                        <li><a href="{% url 'page_two' %}">–¢–∞–±–ª–∏—Ü—ñ</a></li>
                        <li><a href="{% url 'page_three' %}">–°—Ö–µ–º–∞</a></li>
                        <li><a href="{% url 'page_four' %}" class="active">–ü—Ä–æ—Ñ—ñ–ª—å</a></li> 
                    </ul>
                </nav>
            </div>
        </header>

        <div class="main-form">
            <h2>üìù –ó–∞–ø–∏—Ç —Ä–æ–ª—ñ –≤—ñ–¥ —ñ–º–µ–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</h2>

            <div class="filters-container" style="border: none; padding: 0;">
                <div class="filter-group" style="flex-grow: 1;">
                    <label for="user-id-select">–í–∏–±–µ—Ä—ñ—Ç—å ID –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞:</label>
                    
                    <select id="user-id-select" onchange="loadUserInfo(this.value)">
                        <option value="">-- –í–∏–±–µ—Ä—ñ—Ç—å ID --</option>
                        {% for user in all_users %}
                        <option value="{{ user.id_user }}">
                            ID: {{ user.id_user }} ({{ user.prizvische }} {{ user.name }})
                        </option>
                        {% endfor %}
                    </select>
                    
                </div>
            
                <button class="filter-button" onclick="requestRole()" style="background-color: #007bff;">
                    –ó–∞–ø—Ä–æ—Å–∏—Ç–∏ —Ä–æ–ª—å
                </button>
            </div>
            
            <hr>

            <div id="user-info-block" class="management-block" style="display: none;">
                <h3>–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –ø–æ—Ç–æ—á–Ω—ñ –ø—Ä–∞–≤–∞:</h3>
                
                <p>–ü–æ—Å–∞–¥–∞: <strong id="user-position"></strong></p>
                
                <table class="roles-table">
                    <thead>
                        <tr>
                            <th style="width: 40%;">–î–æ–¥–∞—Ç–æ–∫</th>
                            <th style="width: 60%;">–ü–æ—Ç–æ—á–Ω—ñ –†–æ–ª—ñ</th>
                        </tr>
                    </thead>
                    <tbody id="user-roles-display">
                        <tr><td colspan="2">–û–±–µ—Ä—ñ—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É –ø—Ä–∞–≤.</td></tr>
                    </tbody>
                </table>
            </div>

        </div>
        
        <div id="request-modal" class="selection-form-block" style="display: none; position: fixed; top: 10%; left: 50%; transform: translateX(-50%); width: 400px; z-index: 1000;">
            <h3>–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–ø–∏—Ç—É –Ω–∞ —Ä–æ–ª—å</h3>
            
            <p><strong>–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á:</strong> <span id="request-user-pib"></span></p>
            
            <form id="role-request-form" onsubmit="event.preventDefault(); submitRoleRequest();">
                <div class="filter-group" style="margin-bottom: 15px;">
                    <label for="role-reason">–ü—Ä–∏—á–∏–Ω–∞ –∑–∞–ø–∏—Ç—É:</label>
                    <textarea id="role-reason" name="role-reason" rows="5" style="width: 100%; padding: 10px;" required>
–Ø, [–ü–Ü–ë], –ø—Ä–æ—à—É –Ω–∞–¥–∞—Ç–∏ –º–µ–Ω—ñ —Ä–æ–ª—å [–ù–∞–∑–≤–∞_–†–æ–ª—ñ] —É –¥–æ–¥–∞—Ç–∫—É [–ù–∞–∑–≤–∞_–î–æ–¥–∞—Ç–∫—É] –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Ä–æ–±–æ—á–∏—Ö –æ–±–æ–≤'—è–∑–∫—ñ–≤.
                    </textarea>
                </div>
                
                <div class="action-buttons-group">
                    <button type="submit" class="approve-button">
                        ‚úÖ –ù–∞–¥—ñ—Å–ª–∞—Ç–∏ –∑–∞–ø–∏—Ç
                    </button>
                    <button type="button" class="cancel-button" onclick="closeModal()">
                        ‚úñÔ∏è –°–∫–∞—Å—É–≤–∞—Ç–∏
                    </button>
                </div>
            </form>
        </div>
        </div>
    
    <script>
        // ... (–¢—É—Ç –ø–æ—Ç—Ä—ñ–±–µ–Ω –≤–∞—à —ñ—Å–Ω—É—é—á–∏–π JS-–∫–æ–¥ –∑ UserList, RoleD —Ç–∞ —ñ–Ω.) ...
        // –û—Å–∫—ñ–ª—å–∫–∏ —Ü–µ –æ–∫—Ä–µ–º–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞, –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É–¥–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–∞–Ω—ñ UserList —á–µ—Ä–µ–∑ Django View.
        
        // ==========================================================
        // üöÄ –ù–û–í–ê –õ–û–ì–Ü–ö–ê JS –î–õ–Ø you_user.html
        // ==========================================================
        
        const userInfoBlock = document.getElementById('user-info-block');
        const userPosition = document.getElementById('user-position');
        const userRolesDisplay = document.getElementById('user-roles-display');
        const requestModal = document.getElementById('request-modal');
        const requestUserPib = document.getElementById('request-user-pib');
        
        let selectedUserPib = '';

        // –§—É–Ω–∫—Ü—ñ—è, —è–∫–∞ —ñ–º—ñ—Ç—É—î –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
        function loadUserInfo(userId) {
            if (!userId) {
                userInfoBlock.style.display = 'none';
                return;
            }
            
            // üí° –í —Ä–µ–∞–ª—å–Ω–æ–º—É –ø—Ä–æ–µ–∫—Ç—ñ —Ç—É—Ç –±—É–¥–µ AJAX-–∑–∞–ø–∏—Ç –¥–æ Django, 
            // –∞–±–æ –ø–æ—à—É–∫ —É DATA_SOURCE, —è–∫–∏–π –º–∏ –ø–µ—Ä–µ–¥–∞–ª–∏ —Ä–∞–Ω—ñ—à–µ.
            
            // –¢–∏–º—á–∞—Å–æ–≤—ñ –¥–∞–Ω—ñ (–∑–∞–≥–ª—É—à–∫–∞)
            const user = { 
                id: userId, 
                pib: '–í–∏–±—Ä–∞–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á (ID: ' + userId + ')', 
                position: '–ú–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–æ–µ–∫—Ç—É',
                roles: [
                    { app: 'ERP_Finance', role: 'Fin_View_Only' },
                    { app: 'HR_Portal', role: 'HR_Reader' }
                ]
            };
            
            selectedUserPib = user.pib;

            // –û–Ω–æ–≤–ª–µ–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–æ–≥–æ –±–ª–æ–∫—É
            userPosition.textContent = user.position;
            requestUserPib.textContent = user.pib;

            // –ó–∞–ø–æ–≤–Ω–µ–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—ñ —Ä–æ–ª–µ–π
            userRolesDisplay.innerHTML = user.roles.map(r => `
                <tr>
                    <td>${r.app}</td>
                    <td>${r.role}</td>
                </tr>
            `).join('');

            userInfoBlock.style.display = 'block';
        }

        // –§—É–Ω–∫—Ü—ñ—è, —è–∫–∞ –≤—ñ–¥–∫—Ä–∏–≤–∞—î –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ
        function requestRole() {
            if (selectedUserPib === '') {
                alert('–ë—É–¥—å –ª–∞—Å–∫–∞, —Å–ø–æ—á–∞—Ç–∫—É –≤–∏–±–µ—Ä—ñ—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.');
                return;
            }
            requestModal.style.display = 'block';
        }

        // –§—É–Ω–∫—Ü—ñ—è, —è–∫–∞ –∑–∞–∫—Ä–∏–≤–∞—î –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ
        function closeModal() {
            requestModal.style.display = 'none';
        }

        // –§—É–Ω–∫—Ü—ñ—è –æ–±—Ä–æ–±–∫–∏ –∑–∞–ø–∏—Ç—É
        function submitRoleRequest() {
            const reason = document.getElementById('role-reason').value;
            
            alert(`
                –ó–∞–ø–∏—Ç –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ!
                –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á: ${selectedUserPib}
                –ü—Ä–∏—á–∏–Ω–∞: ${reason.substring(0, 50)}...
                (–¢—É—Ç –º–∞—î –±—É—Ç–∏ AJAX-–∑–∞–ø–∏—Ç –¥–æ Django)
            `);
            closeModal();
            // üí° –í —Ä–µ–∞–ª—å–Ω–æ–º—É –ø—Ä–æ–µ–∫—Ç—ñ —Ç—É—Ç –±—É–¥–µ –æ—á–∏—â–µ–Ω–Ω—è —Ñ–æ—Ä–º–∏ —Ç–∞ AJAX-–∑–∞–ø–∏—Ç.
        }
    </script>
</body>
</html>

4page

{% load static %}
<!DOCTYPE html>
<html>
<head>
¬† ¬† <title>–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –†–æ–ª–µ–π</title>
¬† ¬† <meta charset="UTF-8"> 
¬† ¬† <link rel="stylesheet" href="{% static 'main/data_view.css' %}?v=1.1">
</head>
<body>
¬† ¬† <div class="container">
        
        ¬† ¬† ¬† ¬† <header class="header">
¬† ¬† ¬† ¬† ¬† ¬† <div class="header-content">
¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <h1>–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –†–æ–ª–µ–π –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º</h1>
¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <nav class="main-nav">
¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <ul>
¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <li><a href="{% url 'role_assignment' %}">–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è</a></li>
¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <li><a href="{% url 'page_two' %}">–¢–∞–±–ª–∏—Ü—ñ</a></li>
¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <li><a href="{% url 'page_three' %}">–°—Ö–µ–º–∞</a></li>
¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <li><a href="{% url 'page_four' %}" class="active">–ü—Ä–æ—Ñ—ñ–ª—å</a></li> 
¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </ul>
¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </nav>
¬† ¬† ¬† ¬† ¬† ¬† </div>
¬† ¬† ¬† ¬† </header>
        
        <div class="main-content">
¬† ¬† ¬† ¬† ¬† ¬† <img src="{% static 'main/images/Actoru.png' %}" alt="–°—Ö–µ–º–∞ –∞–±–æ –î—ñ–∞–≥—Ä–∞–º–∞" class="main-diagram-img">
        </div>
        
¬† ¬† </div>
</body>
</html>

all css 

/*
======================================================
1. –û–°–ù–û–í–ù–Ü –°–¢–ò–õ–Ü –¢–ê –•–ï–î–ï–†
======================================================
*/

.container {
    max-width: 900px;
    margin: 0 auto;
    padding: 20px;
    font-family: sans-serif;
}

.header {
    background-color: #3f51b5; /* –°–∏–Ω—ñ–π —Ñ–æ–Ω —Ö–µ–¥–µ—Ä–∞ */
    color: white;
    padding: 0;
    margin-bottom: 20px;
}

.header-content {
    padding: 15px 20px 0;
}

.header h1 {
    margin: 0;
    font-size: 1.8em;
}

/* –°—Ç–∏–ª—ñ –ù–∞–≤—ñ–≥–∞—Ü—ñ—ó (–í–∫–ª–∞–¥–∫–∏) */
.main-nav ul {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex; /* –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–µ —Ä–æ–∑–º—ñ—â–µ–Ω–Ω—è */
    border-top: 1px solid #000000;
}

.main-nav a {
    display: block;
    padding: 10px 15px;
    text-decoration: none;
    color: white; /* –ù–µ–∞–∫—Ç–∏–≤–Ω–∏–π —Ç–µ–∫—Å—Ç: –±—ñ–ª–∏–π */
    background-color: #000000; /* –§–æ–Ω: —á–æ—Ä–Ω–∏–π */
    transition: background-color 0.2s;
}

.main-nav a:hover {
    background-color: #333333;
}

.main-nav a.active {
    background-color: white; /* –ê–∫—Ç–∏–≤–Ω–∞ –≤–∫–ª–∞–¥–∫–∞: –±—ñ–ª–∞ */
    color: #000000; /* –¢–µ–∫—Å—Ç –∞–∫—Ç–∏–≤–Ω–æ—ó –≤–∫–ª–∞–¥–∫–∏: —á–æ—Ä–Ω–∏–π */
    font-weight: bold;
    border-radius: 5px 5px 0 0;
}

/*
======================================================
2. –°–¢–ò–õ–Ü –§–û–†–ú–ò –í–í–û–î–£ (–ü–Ü–ë, –ü–û–°–ê–î–ê, –ö–ù–û–ü–ö–ê)
======================================================
*/

.group-label {
    display: block;
    font-weight: bold;
    margin-bottom: 5px;
    margin-top: 15px;
}

/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≤–∏—Ä—ñ–≤–Ω—é–≤–∞–Ω–Ω—è –≤ —Ä—è–¥–æ–∫ */
.input-row-container {
    display: flex;
    gap: 10px;
    align-items: center;
    margin-bottom: 15px;
    flex-wrap: nowrap;
}

/* –ë–ª–æ–∫ –ü–Ü–ë */
.fio-inputs {
    display: flex;
    flex-grow: 1.5; 
    gap: 10px;
}

/* –ë–ª–æ–∫ –ü–æ—Å–∞–¥–∏ */
.position-group {
    flex-grow: 2; 
    min-width: 150px;
}

/* üöÄ –°–ø—ñ–ª—å–Ω—ñ —Å—Ç–∏–ª—ñ –¥–ª—è –≤–∏—Å–æ—Ç–∏ –ø–æ–ª—ñ–≤ –≤–≤–æ–¥—É (–ü–Ü–ë, –ü–æ—Å–∞–¥–∞, Select) */
.fio-inputs input,
.position-group input,
.selection-control-group select {
    height: 40px; 
    padding: 7px 10px;
    box-sizing: border-box; 
    border: 1px solid #ccc;
    flex-grow: 1; 
}

.position-group input {
    background-color: #f0f0f0;
}

/* –ö–Ω–æ–ø–∫–∞ "–î–æ–¥–∞—Ç–∏ –†–æ–ª—å" */
.add-button {
    height: 40px; 
    padding: 7px 15px;
    flex-shrink: 0; 
    background-color: #4caf50;
    color: white;
    font-size: 1em;
    border: none;
    cursor: pointer;
    white-space: nowrap; 
}

/* –°—Ç–∏–ª—ñ –¥–ª—è –≤–∏–ø–∞–¥–∞—é—á–∏—Ö –ø—ñ–¥–∫–∞–∑–æ–∫ */
.autocomplete-dropdown {
    list-style: none;
    padding: 0;
    margin: 0;
    border: 1px solid #ddd;
    border-top: none;
    max-height: 150px;
    overflow-y: auto;
    background: white;
    position: absolute; 
    width: 600px; 
    z-index: 100;
}
.autocomplete-dropdown li {
    padding: 10px;
    cursor: pointer;
    border-bottom: 1px solid #eee;
}
.autocomplete-dropdown li:hover {
    background-color: #f0f0f0;
}

/*
======================================================
3. –°–¢–ò–õ–Ü –î–õ–Ø –ë–õ–û–ö–Ü–í –£–ü–†–ê–í–õ–Ü–ù–ù–Ø –†–û–õ–Ø–ú–ò (2 & 3)
======================================================
*/

.management-block, .selection-form-block {
    margin-top: 30px;
    padding: 20px;
    border-radius: 8px;
}

.management-block {
    border: 1px solid #ddd;
    background-color: #f9f9f9;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.selection-form-block {
    border: 1px solid #3f51b5;
    background-color: #e8eaf6;
}

/* –¢–∞–±–ª–∏—Ü—è –ø–æ—Ç–æ—á–Ω–∏—Ö —Ä–æ–ª–µ–π */
.roles-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
}

.roles-table th, .roles-table td {
    padding: 12px 15px;
    text-align: left;
    border: 1px solid #e0e0e0;
}

.roles-table th {
    background-color: #e6e6e6;
    font-weight: bold;
    color: #333;
}

/* –ö–Ω–æ–ø–∫–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è */
.delete-role-btn {
    background-color: #dc3545;
    color: white;
    border: none;
    padding: 8px 12px;
    cursor: pointer;
    border-radius: 5px;
    transition: background-color 0.2s;
    font-size: 14px;
}

/* –ö–æ–Ω—Ç—Ä–æ–ª–∏ –≤–∏–±–æ—Ä—É –Ω–æ–≤–∏—Ö —Ä–æ–ª–µ–π */
.selection-controls-container {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
    align-items: flex-end;
}

.selection-control-group {
    display: flex;
    flex-direction: column;
    flex-grow: 1;
}

.selection-control-group label {
    font-weight: bold;
    margin-bottom: 5px;
    color: #333;
}

/* –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω–∏—Ö —Ä–æ–ª–µ–π */
.role-list-container {
    padding: 15px;
    border: 1px solid #ccc;
    background-color: white;
    max-height: 250px;
    overflow-y: auto;
    border-radius: 4px;
    margin-bottom: 20px;
}

/* –ö–Ω–æ–ø–∫–∏ –û–¥–æ–±—Ä–∏—Ç–∏/–°–∫–∞—Å—É–≤–∞—Ç–∏ */
.action-buttons-group {
    display: flex;
    gap: 15px;
    justify-content: flex-end;
}

.approve-button {
    background-color: #28a745;
    color: white;
    padding: 10px 20px;
    border: none;
    cursor: pointer;
    border-radius: 4px;
    font-weight: bold;
}

.cancel-button {
    background-color: #6c757d;
    color: white;
    padding: 10px 20px;
    border: none;
    cursor: pointer;
    border-radius: 4px;
    font-weight: bold;
}
.main-content {
    /* –í—ñ–¥—Å—Ç—É–ø –≤—ñ–¥ —Ö–µ–¥–µ—Ä–∞ */
    padding: 20px 0;
    text-align: center; /* –¶–µ–Ω—Ç—Ä—É–≤–∞–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è */
}

.main-diagram-img {
    /* –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ —à–∏—Ä–∏–Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
    max-width: 100%; 
    /* –û–±–º–µ–∂—É—î–º–æ –≤–∏—Å–æ—Ç—É, —â–æ–± –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –Ω–µ –±—É–ª–æ –∑–∞–Ω–∞–¥—Ç–æ –≤–µ–ª–∏–∫–∏–º */
    max-height: 80vh; 
    /* –û–±'—î–∫—Ç–Ω–æ-–ø—ñ–¥–≥–æ–Ω–∫–∞: –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ –≤—Å—è –∫–∞—Ä—Ç–∏–Ω–∫–∞ –≤–º—ñ—â—É—î—Ç—å—Å—è */
    object-fit: contain; 
    /* –î–æ–¥–∞—î–º–æ —Ç—ñ–Ω—å –∞–±–æ —Ä–∞–º–∫—É –¥–ª—è –∫—Ä–∞—â–æ–≥–æ –≤—ñ–∑—É–∞–ª—å–Ω–æ–≥–æ –µ—Ñ–µ–∫—Ç—É (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ) */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); 
    border-radius: 8px;
}
